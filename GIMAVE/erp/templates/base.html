<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            font-family: Calibri Light;
            background-color: #F2F2F2;
        }

        .main {
            margin-left: 160px;
            padding: 20px;
        }

        .sidenav {
            height: 100%;
            width: 160px;
            position: fixed;
            top: 0;
            left: 0;
            background-color: #333;
            padding-top: 20px;
            overflow-x: hidden;
            transition: 0.3s;
        }

        .sidenav:hover {
            width: 210px;
        }

        .sidenav a,
        .dropdown-btn {
            padding: 16px 16px 16px 24px;
            font-size: 18px;
            color: white;
            display: block;
            text-align: left;
            text-decoration: none;
            background: none;
            border: none;
            width: 100%;
            font-family: Calibri;
            cursor: pointer;
        }

        .sidenav a:hover,
        .dropdown-btn:hover {
            background-color: #3b3b3b;
        }

        .dropdown {
            position: relative;
        }

        /* Todos os containers de submenu inicialmente ocultos */
        .dropdown-container {
            display: none;
            background-color: #444;
            min-width: 200px;
            z-index: 1;
        }

        /* Menu principal - posiciona o submenu abaixo */
        .dropdown > .dropdown-container {
            left: 0;
            top: 100%;
        }

        /* Quando o pai é hover, exibe seu submenu */
        .dropdown:hover > .dropdown-container {
            display: block;
        }

        /* Submenu dentro de outro submenu */
        .dropdown-container .dropdown {
            display: block;
        }

        /* Mantém submenus aninhados funcionando */
        .dropdown-container .dropdown:hover > .dropdown-container {
            display: block;
            background-color: #6f6f6f;
        }

        /* Estilo dos links de submenu */
        .dropdown-container a,
        .dropdown-container .dropdown-btn {
            display: block;
            font-size: 16px;
            padding: 12px 16px;
            color: white;
            text-decoration: none;
            background: none;
            border: none;
            cursor: pointer;
            text-align: left;
            white-space: nowrap;
        }

        .dropdown-container a:hover,
        .dropdown-container .dropdown-btn:hover {
            background-color: #666;
        }

        /* Garante que o submenu permaneça aberto quando hover no container */
        .dropdown-container:hover {
            display: block;
        }
    </style>

    {% block head_extra %}{% endblock %}
</head>
<body>

<!-- Menu -->
<div class="sidenav">
    <div style="display: flex; flex-direction: column; height: 99%;">

        <!-- Home -->
        <a href="{{ url_for('menu_principal') }}">Home</a>

        <!-- Comercial -->
        {% if 'COMERCIAL' in session['modulos'] or 'COMERCIALGESTOR' in session['modulos'] %}
        <div class="dropdown">
            <div class="dropdown-btn">Comercial (3)</div>
            <div class="dropdown-container">

                <!--Cartões Elo-->
                <div class="dropdown">
                    <div class="dropdown-btn"><b>Cartões Elo</b></div>
                    <div class="dropdown-container">
                        <a href="{{ url_for('simulacaoCOM') }}">Simulação Elo</a>

                        {% if 'COMERCIALGESTOR' in session['modulos'] %}
                        <a href="{{ url_for('parametrosCOM') }}">Parâmetros Comerciais</a>
                        <a href="{{ url_for('aprovacoesCOM') }}">Aprovar Simulações</a>
                    {% endif %}
                    </div>                    
                    
                    
                    <!-- Cartões Elo Parcerias-->
                    <div class="dropdown">
                        <div class="dropdown-btn"><b>Cartões Elo Parcerias</b></div>
                        <div class="dropdown-container">
                            <a href="{{ url_for('parceriasCOM') }}">Simulação Parcerias</a>
                            
                            {% if 'COMERCIALGESTOR' in session['modulos'] %}
                        <a href="{{ url_for('parametrosprcCOM') }}">Parâmetros Comerciais</a>
                        <a href="{{ url_for('aprovacoesprcCOM') }}">Aprovar Simulações</a>
                    {% endif %}
                    </div>
                 

                <!--Relatórios-->
                <div class="dropdown">
                    <div class="dropdown-btn"><b>Relatórios</b></div>
                    <div class="dropdown-container">
                        <a href="{{ url_for('relatorio1COM') }}">Analítico por Usuário</a>
                        <a href="{{ url_for('relatorio2COM') }}">Analítico por Simulação</a>
                    </div>
                </div>
                </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Compras -->
        {% if 'COMPRAS' in session['modulos'] %}
        <div class="dropdown">
            <div class="dropdown-btn">Compras (2)</div>
            <div class="dropdown-container">

                <div class="dropdown">
                    <div class="dropdown-btn"><b>Cadastros</b></div>
                    <div class="dropdown-container">
                        <a href="{{ url_for('cadastroCMP') }}">Orçamentos</a>
                        <a href="{{ url_for('fornecedoresCMP') }}">Fornecedores</a>
                        <a href="{{ url_for('produtosCMP') }}">Produtos</a>
                        <a href="{{ url_for('categoriasCMP') }}">Categorias</a>
                    </div>

                <div class="dropdown">
                    <div class="dropdown-btn"><b>Orçamentos</b></div>
                    <div class="dropdown-container">
                        <a href="{{ url_for('validarCMP') }}">Validar</a>
                        <a href="{{ url_for('dashboardCMP') }}">Dashboard</a>
                    </div>
                </div>
            </div>
        </div>
        </div>
        {% endif %}

        <!-- Financeiro -->
        {% if 'FINANCEIRO' in session['modulos'] %}
        <div class="dropdown">
            <div class="dropdown-btn">Financeiro (2)</div>
            <div class="dropdown-container">

                <div class="dropdown">
                    <div class="dropdown-btn"><b>Conciliação</b></div>
                    <div class="dropdown-container">
                        <a href="{{ url_for('conciliacao_formFIN') }}">Formulário Dashboard</a>
                        <a href="{{ url_for('dashboardconciliacaoFIN') }}">Dashboard Conciliação</a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Admin -->
        {% if session['nivel'] == 'ADMIN' %}
        <div class="dropdown">
            <div class="dropdown-btn">Admin (2)</div>
            <div class="dropdown-container">
                <a href="{{ url_for('listar_usuarios_acessos') }}">Acessos Módulos</a>
                <a href="{{ url_for('reg_usuarios') }}">Gerenciar Usuários</a>
            </div>
        </div>
        {% endif %}

        <!-- Logout -->
        <form action="{{ url_for('logout') }}" method="POST" style="margin-top: auto; padding: 15px;">
            <button type="submit" style="width: 100%; padding: 10px; background-color: #333333; color: white; border: none; cursor: pointer; font-size: 17px; font-family: Calibri;">
                Log Out
            </button>
        </form>
    </div>
</div>


<!-- Conteúdo principal -->
<div class="main">
    {% block content %}
    {% endblock %}
</div>

{% block scripts %}
{% endblock %}
